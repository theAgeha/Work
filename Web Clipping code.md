javascript:%20Promise.all([import('https://unpkg.com/turndown@6.0.0?module%27),%20import(%27https://unpkg.com/@tehshrike/readability@0.2.0%27),%20]).then(async%20([%7B%20%20%20%20%20default:%20Turndown%20%7D,%20%7B%20%20%20%20%20default:%20Readability%20%7D])%20=%3E%20%7B%20%20%20%20/*%20Optional%20vault%20name%20*/%20%20%20const%20vault%20=%20%22Work%22;%20%20%20%20/*%20Optional%20folder%20name%20such%20as%20%22Clippings/%22%20*/%20%20%20const%20folder%20=%20%22Clipping/%22;%20%20%20%20/*%20Optional%20tags%20%20*/%20%20%20const%20tags%20=%20%22#clippings%22;%20%20%20%20function%20getSelectionHtml()%20%7B%20%20%20%20%20var%20html%20=%20%22%22;%20%20%20%20%20if%20(typeof%20window.getSelection%20!=%20%22undefined%22)%20%7B%20%20%20%20%20%20%20%20%20var%20sel%20=%20window.getSelection();%20%20%20%20%20%20%20%20%20if%20(sel.rangeCount)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20var%20container%20=%20document.createElement(%22div%22);%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20=%200,%20len%20=%20sel.rangeCount;%20i%20%3C%20len;%20++i)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20container.appendChild(sel.getRangeAt(i).cloneContents());%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20html%20=%20container.innerHTML;%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%7D%20else%20if%20(typeof%20document.selection%20!=%20%22undefined%22)%20%7B%20%20%20%20%20%20%20%20%20if%20(document.selection.type%20==%20%22Text%22)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20html%20=%20document.selection.createRange().htmlText;%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%7D%20%20%20%20%20return%20html;%20%20%20%7D%20%20%20%20const%20selection%20=%20getSelectionHtml();%20%20%20%20const%20%7B%20%20%20%20%20%20%20title,%20%20%20%20%20%20%20byline,%20%20%20%20%20%20%20content%20%20%20%7D%20=%20new%20Readability(document.cloneNode(true)).parse();%20%20%20%20function%20getFileName(fileName)%20%7B%20%20%20%20%20var%20userAgent%20=%20window.navigator.userAgent,%20%20%20%20%20%20%20%20%20platform%20=%20window.navigator.platform,%20%20%20%20%20%20%20%20%20windowsPlatforms%20=%20['Win32',%20'Win64',%20'Windows',%20'WinCE'];%20%20%20%20%20%20if%20(windowsPlatforms.indexOf(platform)%20!==%20-1)%20%7B%20%20%20%20%20%20%20fileName%20=%20fileName.replace(':',%20'').replace(/[/%5C%5C?%*%7C%22%3C%3E]/g,%20'-');%20%20%20%20%20%7D%20else%20%7B%20%20%20%20%20%20%20fileName%20=%20fileName.replace(':',%20'').replace(/%5C//g,%20'-').replace(/%5C%5C/g,%20'-');%20%20%20%20%20%7D%20%20%20%20%20return%20fileName;%20%20%20%7D%20%20%20const%20fileName%20=%20getFileName(title);%20%20%20%20if%20(selection)%20%7B%20%20%20%20%20%20%20var%20markdownify%20=%20selection;%20%20%20%7D%20else%20%7B%20%20%20%20%20%20%20var%20markdownify%20=%20content;%20%20%20%7D%20%20%20%20if%20(vault)%20%7B%20%20%20%20%20%20%20var%20vaultName%20=%20'&vault='%20+%20encodeURIComponent(%60$%7Bvault%7D%60);%20%20%20%7D%20else%20%7B%20%20%20%20%20%20%20var%20vaultName%20=%20'';%20%20%20%7D%20%20%20%20const%20markdownBody%20=%20new%20Turndown(%7B%20%20%20%20%20%20%20headingStyle:%20'atx',%20%20%20%20%20%20%20hr:%20'---',%20%20%20%20%20%20%20bulletListMarker:%20'-',%20%20%20%20%20%20%20codeBlockStyle:%20'fenced',%20%20%20%20%20%20%20emDelimiter:%20'*',%20%20%20%7D).turndown(markdownify);%20%20%20%20var%20date%20=%20new%20Date();%20%20%20%20function%20convertDate(date)%20%7B%20%20%20%20%20var%20yyyy%20=%20date.getFullYear().toString();%20%20%20%20%20var%20mm%20=%20(date.getMonth()+1).toString();%20%20%20%20%20var%20dd%20%20=%20date.getDate().toString();%20%20%20%20%20var%20mmChars%20=%20mm.split('');%20%20%20%20%20var%20ddChars%20=%20dd.split('');%20%20%20%20%20return%20yyyy%20+%20'-'%20+%20(mmChars[1]?mm:%220%22+mmChars[0])%20+%20'-'%20+%20(ddChars[1]?dd:%220%22+ddChars[0]);%20%20%20%7D%20%20%20%20const%20today%20=%20convertDate(date);%20%20%20%20const%20fileContent%20=%20%20%20%20%20%20%20%20%22author::%20%22%20+%20byline%20+%20%22%5Cn%22%20%20%20%20%20%20%20+%20%22source::%20[%22%20+%20title%20+%20%22](%22%20+%20document.URL%20+%20%22)%5Cn%22%20%20%20%20%20%20%20+%20%22clipped::%20[[%22%20+%20today%20+%20%22]]%5Cn%22%20%20%20%20%20%20%20+%20%22published::%20%5Cn%5Cn%22%20%20%20%20%20%20%20%20+%20tags%20+%20%22%5Cn%5Cn%22%20%20%20%20%20%20%20+%20markdownBody%20;%20%20%20%20%20%20document.location.href%20=%20%22obsidian://new?%22%20%20%20%20%20+%20%22file=%22%20+%20encodeURIComponent(folder%20+%20fileName)%20%20%20%20%20+%20%22&content=%22%20+%20encodeURIComponent(fileContent)%20%20%20%20%20+%20vaultName%20;%20%7D)